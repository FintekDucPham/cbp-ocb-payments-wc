<rb-content-view class="rb-content-view--framed form">
    <bd-header>{{::"raiff.payments.new.label.header"|translate}}</bd-header>
    <bd-form-panel>

        <bd-item-property label="{{::'raiff.payments.new.payment_type'|translate}}">

            <ui-select ng-model="payment.type"
                       theme="bootstrap"
                       on-select="changePaymentType($item)"
                       ng-disabled="activeStep.id !== 'fill' || payment.fixedAccountSelection"
                       reset-search-input="false"
                       required>
                <ui-select-match placeholder="{{ ::'raiff.payments.new.payment_type.select'|translate }}">
                    {{'raiff.payments.new.types.' + $select.selected.code | translate}}
                </ui-select-match>
                <ui-select-choices repeat="paymentType in payment.meta.paymentTypes">
                    <div ng-bind-html="::'raiff.payments.new.types.' + paymentType.code | translate | highlight: $select.search"></div>
                </ui-select-choices>
            </ui-select>

        </bd-item-property>

        <bd-step-panel bd-step-switch-states
                       bd-active-step="activeStep"
                       bd-step-remote="bdStepRemote">
            <bd-step bd-step-id="fill">Wprowadzanie danych</bd-step>
            <bd-step bd-step-id="verify">Weryfikacja danych</bd-step>
            <bd-step bd-step-id="status">Status operacji</bd-step>
        </bd-step-panel>

        <bd-form-content>
            <div ui-view></div>
        </bd-form-content>

        <bd-form-footer>
            <bd-button class="bd-form-footer__button--negative"
                       ng-show="activeStep.id === 'verify'"
                       ui-sref="payments.content">{{ ::'raiff.payments.new.btn.cancel' | translate }}
            </bd-button>
            <bd-button class="bd-form-footer__button--negative"
                       ng-show="activeStep.id === 'verify'"
                       ng-click="moveBackwards()">{{ ::'raiff.payments.new.btn.change' | translate }}
            </bd-button>
            <bd-button class="bd-form-footer__button--negative"
                       ng-show="activeStep.id === 'fill'"
                       ng-click="clearForm()">{{ ::'raiff.payments.new.btn.clear' | translate }}
            </bd-button>
            <bd-button class="bd-form-footer__button--positive bd-button__primary"
                       type="submit"
                       ng-show="activeStep.id === 'fill'"
                       ng-click="moveForward()">{{ ::'raiff.payments.new.btn.next' | translate }}
            </bd-button>
            <bd-button class="bd-form-footer__button--positive bd-button__primary"
                       ng-show="activeStep.id === 'verify'"
                       ng-click="moveForward()">{{ ::'raiff.payments.new.btn.accept' | translate }}
            </bd-button>
            <bd-button class="bd-form-footer__button--positive bd-button__primary"
                       ng-show="activeStep.id === 'status'" ui-sref="payments.content">{{
                ::'raiff.payments.new.btn.finalize' | translate }}
            </bd-button>
        </bd-form-footer>

    </bd-form-panel>

</rb-content-view>