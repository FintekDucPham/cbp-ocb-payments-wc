<rb-payment-recipients-fill>
    <div ng-controller="RecipientsManageFillDomesticController">

        <section ng-if="recipient.operation.code != 'EDIT'">

            <bd-item-property label="{{ ::'raiff.payments.recipients.new.domestic.fill.account_related' | translate }}">
                 <input name="remitterAccountId" hidden ng-model="recipient.formData.remitterAccountId" required/>

                <rb-account-select rb-account-id="recipient.formData.remitterAccountId"
                                   rb-account="recipient.items.senderAccount"
                                   rb-account-list="recipient.items.accountList"
                                   rb-on-account-select="onSenderAccountSelect()"
                                   rb-init-select-fn="getAccountByNrb($accountList, $select)"
                                   rb-account-restrictions="ACCOUNT_RESTRICTION_DEBIT"
                                   rb-product-list-name="TRANSFER_FROM_LIST"
                                   rb-account-select-params="recipientSelectParams"
                                   rb-init-select-value = "{{selectNrb}}"></rb-account-select>

                <eb-validation-messages eb-name="remitterAccountId">
                    <div eb-message-key="required" class="validation-message animate-on">
                        {{::'raiff.payments.recipients.new.domestic.fill.remitterAccount.EMPTY'|translate}}
                    </div>
                </eb-validation-messages>

            </bd-item-property>
            </section>
        <section ng-show="recipient.operation.code === 'EDIT'">
                <bd-item-property class="bd-item-property--text bd-item-property--disabled"
                                  label="{{ ::'raiff.payments.recipients.new.domestic.fill.account_related' | translate }}">
                    {{ recipient.formData.debitAccountNo | nrbIbanFilter }}
                </bd-item-property>
        </section>

        <bd-item-property label="{{ ::'raiff.payments.recipients.new.domestic.fill.custom_name.label' | translate }}">
            <input name="customName"
                   ng-model="recipient.formData.customName"
                   required
                   ng-pattern="RECIPIENT_NAME_REGEX"
                   class="input-field"
                   placeholder="{{ ::'raiff.payments.recipients.new.domestic.fill.custom_name.placeholder' | translate }}"/>

            <eb-validation-messages eb-name="customName"><!--max 35-->
                <div eb-message-key="required" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.customName.EMPTY'|translate}}
                </div>
                <div eb-message-key="pattern" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.customName.ILLEGAL'|translate}}
                </div>
            </eb-validation-messages>

        </bd-item-property>
        <span ng-if="recipient.operation.code === 'EDIT'">
            <bd-item-property class="bd-item-property--text bd-item-property--disabled" label="{{ ::'raiff.payments.recipients.new.domestic.fill.bankName'|translate}}" ng-show="recipient.meta.bankName.bankNamePromise.$$state.status === 1 && recipient.meta.bankName.recipientBankName != ''">
                <rb-bank-name
                        response-value="recipient.meta.bankName.recipientBankName"
                        account-no="recipient.formData.recipientAccountNo"
                        bank-name-promise="recipient.meta.bankName.bankNamePromise">
                    {{recipient.meta.bankName.recipientBankName}}
                </rb-bank-name>
            </bd-item-property>
            <eb-preloader eb-promise="recipient.meta.bankName.bankNamePromise"></eb-preloader>
        </span>
        <rb-paste-warning>
            <bd-item-property
                    label="{{ ::'raiff.payments.recipients.new.domestic.fill.recipient_account.label' | translate }}" ng-if="recipient.operation.code === 'NEW'">
                    <input id="recipientAccountNo"
                           ng-show="!showHide"
                           name="recipientAccountNo"
                           ng-model="recipient.formData.recipientAccountNo"
                           required="recipient.operation.code !=='EDIT'"
                           bban-nrb
                           ng-readonly="recipient.operation.code === 'EDIT'"
                           bd-matches-none-of="recipientAccountValidators"
                           class="input-field"
                           ng-paste="rbPasteTrigger(this,$event,recipientForm.recipientAccountNo)"
                           ng-keyup="unlockField()"
                           type="text"
                           placeholder="{{ ::'raiff.payments.recipients.new.domestic.fill.recipient_account.placeholder' | translate }}">
                    <input type="text" disabled="true" value="XX XXXX XXXX XXXX XXXX XXXX XXXX XXXX XXXX" ng-show="showHide" class="input-field">
                    <eb-validation-messages eb-name="recipientAccountNo" ng-show="!showHide && isErrorPaste">
                        <div class="validation-message animate-on">
                            {{::'raiff.payments.new.domestic.fill.errorPaste'|translate}}
                        </div>

                    </eb-validation-messages>
                    <eb-validation-messages eb-name="recipientAccountNo"  ng-show="!showHide && !isErrorPaste">
                        <div eb-message-key="required" class="validation-message animate-on">
                            {{::'raiff.payments.recipients.new.domestic.fill.recipient_account.EMPTY_BNF_ACC'|translate}}
                        </div>
                        <div eb-message-key="bbanNrb" class="validation-message animate-on">
                            {{::'raiff.payments.recipients.new.domestic.fill.recipient_account.INCORECT_FORMAT_ACC'|translate}}
                        </div>
                        <div eb-message-key="sameAccount" class="validation-message animate-on">
                            {{::'raiff.payments.recipients.new.domestic.fill.recipient_account.SAME_ACCOUNT'|translate}}
                        </div>
                        <div eb-message-key="notUs" class="validation-message animate-on">
                            {{::'raiff.payments.recipients.new.domestic.fill.recipient_account.ADD_BNF_ACC_NOT_US'|translate}}
                        </div>
                        <div eb-message-key="notZus" class="validation-message animate-on">
                            {{::'raiff.payments.recipients.new.domestic.fill.recipient_account.ADD_BNF_ACC_NOT_ZUS'|translate}}
                        </div>
                    </eb-validation-messages>
            </bd-item-property>
            <span ng-show="isOk || showHide">
            <span>{{::'raiff.payments.new.domestic.fill.account.warning1'|translate}}</span>
            <span style="color: deepskyblue"><span ng-show="digit != 1">{{digit}}</span>{{properties1}}</span>
            <span>{{properties2}}{{::'raiff.payments.new.domestic.fill.account.warning3'|translate}}</span>
            <span class="" style="position: relative">
            <input id="maskNumer"  type="text" ng-model="nrbCheck" size="{{digit}}" ng-change="rbCheckNrb(this)" maxlength="{{digit}}" ng-paste="$event.stopPropagation();$event.preventDefault();">
                <span class="tooltipFix__tooltip">
                    <i style="position: absolute;font-size: 24px;left: 60px; color: green" ng-show="isOk" class="raiff-icons ok_rounded" tooltip="{{::'raiff.payments.new.fill.tooltip'|translate}}"></i>
                 </span>
            </span>
        </span>
        </rb-paste-warning>
        <bd-item-property class="bd-item-property--text bd-item-property--disabled"
                label="{{ ::'raiff.payments.recipients.new.domestic.fill.recipient_account.label' | translate }}" ng-if="recipient.operation.code === 'EDIT'">
            {{recipient.formData.recipientAccountNo | nrbIbanFilter}}
        </bd-item-property>

        <bd-item-property class="bd-item-property--multirow"
                          label="{{ ::'raiff.payments.recipients.new.domestic.fill.recipient_name_address' | translate }}">
            <textarea name="recipientData"
                      ng-model="recipient.formData.recipientData"
                      split-text-max-length-validators="140"
                      ng-pattern="RECIPIENT_DATA_REGEX"
                      required
                      class="input-field input-area--party-data"
                      placeholder="{{ ::'raiff.payments.recipients.new.domestic.fill.recipient_data.placeholder' | translate }}"></textarea>

            <eb-validation-messages eb-name="recipientData">
                <div eb-message-key="required" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.recipient_data.EMPTY'|translate}}
                </div>
                <div eb-message-key="splitTextMaxLength" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.recipient_data.MSG_0557_TOO_LONG_BNF_DATA'|translate}}
                </div>
                <div eb-message-key="pattern" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.recipient_data.MSG_0557_TOO_LONG_BNF_DATA'|translate}}
                </div>
            </eb-validation-messages>

        </bd-item-property>

        <bd-item-property class="bd-item-property--multirow"
                          label="{{ ::'raiff.payments.recipients.new.domestic.fill.description.label' | translate }}">

            <textarea name="description"
                      ng-model="recipient.formData.description"
                      split-text-max-length-validators="140"
                      ng-pattern="PAYMENT_TITLE_REGEX"
                      class="input-field input-area--payment-description"
                      required
                      placeholder="{{ ::'raiff.payments.recipients.new.domestic.fill.description.placeholder' | translate }}"></textarea>

            <eb-validation-messages eb-name="description">
                <div eb-message-key="required" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.description.EMPTY'|translate}}
                </div>
                <div eb-message-key="pattern" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.description.PATTERN'|translate}}
                </div>
                <div eb-message-key="splitTextMaxLength" class="validation-message animate-on">
                    {{::'raiff.payments.recipients.new.domestic.fill.description.MAXLENGTH'|translate}}
                </div>
            </eb-validation-messages>

        </bd-item-property>

    </div>
</rb-payment-recipients-fill>