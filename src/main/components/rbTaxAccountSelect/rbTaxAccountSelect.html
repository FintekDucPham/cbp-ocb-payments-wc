<div class="rb-tax-account-select">
    <div class="search">
        <ui-select
                id="taxOfficeId"
                name="taxOfficeId"
                ng-model="model.taxOffice"
                search-enabled="true"
                on-select="select($item)"
                theme="bootstrap"
                placeholder="{{::'raiff.payments.tax.tax_account_select.placeholder'|translate}}"
                ng-pattern="patterns.nrbPattern"
                ui-select-popup-trigger="taxAccountSearched"
                required>
            <ui-select-match
                    placeholder="{{::'raiff.payments.tax.tax_account_select.placeholder'|translate}}"
                    ng-click="changeFocus()">
                <span class="visible-xs">{{ $select.selected.accountNo | nrbIbanShortFilter }}</span>
                <span class="hidden-xs">{{ $select.selected.accountNo | nrbIbanFilter }}</span>
            </ui-select-match>
            <ui-select-choices repeat="taxOffice.accountNo as taxOffice in taxAccounts | unique: 'accountNo'"
                               class="taxAccountSelectChoices"
                               refresh="onSearched($select.search)"
                               minimum-input-length="3">
                {{taxOffice.accountNo | nrbIbanFilter}}<br/>
                {{taxOffice.officeName+', '+taxOffice.officeAddress}}
            </ui-select-choices>
        </ui-select>
        <i eb-themable class="eb-icon eb-ico-search glyphicon" ng-class="{'focused': elementFocused}"></i>
    </div>
    <eb-validation-messages eb-name="taxOfficeId">
        <div eb-message-key="required" class="validation-message animate-on">
            {{ ::'raiff.payments.tax.tax_account_select.error.empty' | translate }}
        </div>
    </eb-validation-messages>
    <div style="color: #F4390B;font-size: 14px;font-weight: 300;"
         ng-if="showResultNotFound">
        {{:: 'raiff.payments.new.us.fill.recipient_account.NOT_FOUND_US_ACC' | translate}}
    </div>
    <div class="rb-tax-account-select__name">
        {{ model.taxOffice.officeName }}<span ng-if="model.taxOffice.officeAddress.length > 0">, {{model.taxOffice.officeAddress}}</span>
    </div>
</div>