<div>
    <form name="autoBillForm" novalidate>
        <div class="bd-form">
            <div class="bd-form-header pd-bottom">{{::"ocb.payments.domestic.remitter_panel.label"|translate}}</div>
            <bd-item-property label="{{::'ocb.payments.domestic.remitter_account.label' | translate}}">
                <input name="fromAccount" hidden ng-model="payment.formData.fromAccount" required/>
                <rb-account-select-v2 rb-account-id="payment.formData.fromAccount"
                                      rb-account="payment.items.remitterAccount"
                                      rb-account-list="payment.meta.accountList"
                                      rb-account-restrictions="ACCOUNT_RESTRICTION_DEBIT"
                                      rb-product-list-name="TRANSFER_FROM_LIST"
                                      rb-account-select-params="remitterAccountSelectParams"
                                      rb-init-select-value="{{payment.formData.fromAccount}}">
                </rb-account-select-v2>
            </bd-item-property>

            <bd-item-property label="{{::'ocb.payments.domestic.remitter_name.label' | translate}}" class="bd-item-property--text bd-item-property--disabled" >
                <!--{{payment.meta.remitter.fullName}}-->
                <p ng-bind-html="payment.items.remitterAccount | accountOwners"></p>
            </bd-item-property>

            <bd-item-property label="{{::'ocb.payments.domestic.remitter_branch.label' | translate}}" class="bd-item-property--text bd-item-property--disabled" >
                {{payment.items.remitterAccount.openBranch}}
            </bd-item-property>

            <bd-item-property label="{{::'ocb.payments.domestic.available_funds.label' | translate}}"
                              class="accesibleAssetsInline accesibleAssetsBold">
                <bd-amount ng-if="payment.meta.availableFunds !== null" amount="payment.meta.availableFunds" currency="{{payment.items.remitterAccount.currency}}"></bd-amount>
            </bd-item-property>

            <bd-item-property label="{{::'ocb.payments.domestic.daily_limit.label' | translate}}">
                <bd-amount amount="payment.meta.remainingDailyLimit" currency="VND"></bd-amount>
            </bd-item-property>
        </div>

        <div class="bd-form">
        <bd-item-property class="bd-item-property"
                          label="{{ ::'ocb.payments.auto_bill.list.details.customerId' | translate }}">
            <input type="text"
                   name="customerId"
                   ng-model="payment.formData.customerId"
                   required
            />
            <eb-validation-messages eb-name="customerId">
                <div eb-message-key="required" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.field.empty'|translate}}
                </div>
            </eb-validation-messages>
        </bd-item-property>

        <rb-service-select
                rb-update-disabled-state="billInfoSearch"
                rb-service="payment.items.senderService"
                rb-provider="payment.items.senderProvider"
                rb-service-code="payment.formData.serviceCode"
                rb-provider-code="payment.formData.serviceProviderCode">
        </rb-service-select>
        <eb-validation-messages eb-name="providerCode">
            <div eb-message-key="required" class="validation-message animate-on">
                {{::'ocb.payments.new.bill.fill.providerCode.EMPTY_PROVIDERCODE'|translate}}
            </div>
        </eb-validation-messages>

        <bd-item-property label="{{ ::'ocb.payments.auto_bill.list.details.paymentSetting' | translate }}">
            <bd-radio-select bd-model="payment.formData.paymentSetting">
                <bd-radio-option bd-option-value="PAYMENT_SETTING.FULL">
                    <div>
                        {{::'ocb.payments.auto_bill.list.details.paymentSetting.FULL'|translate}}
                    </div>
                </bd-radio-option>
                <bd-radio-option bd-option-value="PAYMENT_SETTING.LIMITED">
                    <div class="bd-item-property--multi__values">
                        <div class="bd-item-property__value--primary" style="display: inline-block;">
                            {{::'ocb.payments.auto_bill.list.details.paymentSetting.LIMITED'|translate}}
                        </div>
                    </div>
                </bd-radio-option>
            </bd-radio-select>
          <div>
            <div class="bd-item-property__value--secondary" style="display: inline;">
               <input type="text"
                      name="next"
                      class="input-field"
                      ng-model="payment.formData.amountLimit.value"
                      rb-number-type-input
                      ng-pattern="AMOUNT_PATTERN"
                      amount-input
                      currency="VND"
               />
             </div>
           <div class="eb-validation-messages" ng-show="isNegativeAmount(payment.formData.amountLimit.value) || isZeroAmount(payment.formData.amountLimit.value)">
             <div class="messages">
               <div  class="validation-message animate-on">
                 {{::'ocb.payments.new.domestic.fill.amount.NEGATIVE_NUMBER'|translate}}
               </div>
             </div>
           </div>
            <eb-validation-messages eb-name="next">
              <div eb-message-key="number" class="validation-message animate-on">
                {{::'ocb.payments.new.domestic.fill.amount.INVALID_NUMBER_AMOUNT'|translate}}
              </div>
              <div eb-message-key="required" class="validation-message animate-on">
                {{::'ocb.payments.new.domestic.fill.amount.EMPTY_AMOUNT'|translate}}
              </div>
              <div eb-message-key="pattern" class="validation-message animate-on">
                {{::'ocb.payments.new.domestic.fill.amount.INCORRECT_AMOUNT'|translate}}
              </div>
              <div eb-message-key="ngMin" class="validation-message animate-on">
                {{::'ocb.payments.new.domestic.fill.amount.INCORRECT_AMOUNT'|translate}}
              </div>
            </eb-validation-messages>
          </div>
        </bd-item-property>

        <bd-item-property label="{{ ::'ocb.payments.new.standing.fill.first_execution_date' | translate }}">
            <rb-datepicker
                    ng-model="payment.formData.firstExecutionDate"
                    rb-form="autoBillForm"
                    rb-name="firstExecutionDate"
                    rb-datepicker-options="rbDatepickerOptions"
                    rb-required="true">
            </rb-datepicker>

            <eb-validation-messages eb-name="firstExecutionDate">
                <div eb-message-key="required" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.field.empty'|translate}}
                </div>
                <div eb-message-key="date" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.invalid.date'|translate}}
                </div>
                <div eb-message-key="rbDatepickerFormat" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.invalid.date'|translate}}
                </div>

                <div eb-message-key="bdMinDate" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.first_execution_date.min'|translate}}
                </div>

                <div eb-message-key="bdMaxDate" class="validation-message animate-on">
                    {{::'ocb.payments.new.standing.fill.first_execution_date.TOO_LATE_FIRST_DATE'|translate|regexReplace:'##DATE##':(firstDateMaxDate|date:'shortDate')}}
                </div>
            </eb-validation-messages>
            <div style="color: #F4390B;font-size: 14px;font-weight: 300;"
                 ng-if="validationErrors['firstExecutionDate'] !== undefined">
                {{validationErrors['firstExecutionDate']}}
            </div>
        </bd-item-property>

        <bd-item-property label="{{ ::'ocb.payments.new.standing.fill.frequency' | translate }}" class="bd-item-property--multi standing_order_frequency">
            <div class="bd-item-property--multi__values">

                <div class="bd-item-property__value--secondary frequency" style="padding-right:5px; width: 100px;">
                    {{payment.formData.frequencyPeriodCount}} {{::'ocb.payments.new.standing.fill.frequencyType.types.1.M' | translate}}
                </div>
            </div>
        </bd-item-property>

        <bd-item-property label="{{::'ocb.payments.auto_bill.list.details.recurringPeriod'|translate}}">
            <bd-radio-select bd-model="payment.formData.recurringPeriod">
                <bd-radio-option bd-option-value="RECURRING_PERIOD.NOLIMIT">
                    <div>
                        {{::'ocb.payments.auto_bill.recurringPeriod.no.limit'|translate}}
                    </div>
                </bd-radio-option>
                <bd-radio-option bd-option-value="RECURRING_PERIOD.LIMITED">
                    <div>
                        {{::'ocb.payments.auto_bill.recurringPeriod.limited'|translate}}
                    </div>
                </bd-radio-option>
            </bd-radio-select>
        </bd-item-property>

        <bd-item-property label="{{ ::'ocb.payments.new.standing.fill.finish_date'|translate }}" ng-show="payment.formData.recurringPeriod == 'PERIOD'">

            <rb-datepicker
                    ng-model="payment.formData.finishDate"
                    rb-form="autoBillForm"
                    rb-name="finishDate"
                    rb-datepicker-options="rbDatepickerOptions"
                    rb-required="payment.formData.recurringPeriod == 'PERIOD'">
            </rb-datepicker>

            <eb-validation-messages eb-name="finishDate">
                <div eb-message-key="required" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.field.empty'|translate}}
                </div>
                <div eb-message-key="date" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.invalid.date'|translate}}
                </div>

                <div eb-message-key="rbDatepickerFormat" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.invalid.date'|translate}}
                </div>

                <div eb-message-key="TOO_LATE_END_DATE" class="validation-message animate-on">
                    {{::'ocb.payments.new.standing.fill.finish_date.TOO_LATE_END_DATE'|translate}}
                </div>
                <div eb-message-key="bdMinDate" class="validation-message animate-on">
                    {{::'ocb.payments.auto_bill.error.first_execution_date.min'|translate}}
                </div>
            </eb-validation-messages>
            <div style="color: #F4390B;font-size: 14px;font-weight: 300;"
                 ng-if="validationErrors['finishDate'] !== undefined">
                {{validationErrors['finishDate']}}
            </div>
        </bd-item-property>
        </div>
    </form>
</div>
