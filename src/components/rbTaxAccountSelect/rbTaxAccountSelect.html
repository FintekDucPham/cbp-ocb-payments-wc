<div class="rb-tax-account-select" ng-blur="changeFocus(false)">
    <div class="search">
        <ui-select
                ng-model="model.taxOffice"
                search-enabled="true"
                on-select="select($item)"
                theme="bootstrap"
                name="recipientAccountNo"
                placeholder="{{::'ocb.payments.tax.tax_account_select.placeholder'|translate}}"
                ng-pattern="patterns.nrbPattern"
                ui-select-popup-trigger="taxAccountSearched"
                ng-required="true">
            <ui-select-match
                    placeholder="{{::'ocb.payments.tax.tax_account_select.placeholder'|translate}}"
                    ng-click="changeFocus(true)"
                    ng-blur="onBlur('match')">
                <span>{{ $select.selected.accountNo | nrbIbanFilter }}</span>
            </ui-select-match>
            <ui-select-choices repeat="taxOffice.accountNo as taxOffice in taxAccounts | unique: 'accountNo'"
                               class="taxAccountSelectChoices"
                               refresh="onSearched($select.search)"
                               minimum-input-length="3">
                <div>{{taxOffice.accountNo | nrbIbanFilter}}</div>
                <div class="truncate_text">{{taxOffice.officeName+', '+taxOffice.officeAddress}}</div>
            </ui-select-choices>
        </ui-select>
        <i eb-themable class="eb-icon eb-ico-search glyphicon" ng-class="{'focused': elementFocused}"></i>
    </div>
    <div style="color: #F4390B;font-size: 14px;font-weight: 300;" ng-if="showResultNotFound || showRequiredError">
        <div ng-if="showResultNotFound">
            {{:: 'ocb.payments.new.us.fill.recipient_account.NOT_FOUND_US_ACC' | translate}}
        </div>
    </div>
    <div class="rb-tax-account-select__name">
        {{ model.taxOffice.officeName }}<span ng-if="model.taxOffice.officeAddress.length > 0">, {{model.taxOffice.officeAddress}}</span>
    </div>
</div>